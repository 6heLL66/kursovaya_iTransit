(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{182:function(e,t,n){},183:function(e,t,n){},19:function(e){e.exports=JSON.parse('{"rus":{"header":{"home":"\u0413\u043b\u0430\u0432\u043d\u0430\u044f","collections":"\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438","search":"\u041f\u043e\u0438\u0441\u043a","logout":"\u0412\u044b\u0439\u0442\u0438","signin":"\u0412\u0445\u043e\u0434","signup":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"},"collections":{"collection":"\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f","collection2":"\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e","create":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c","owner":"\u0412\u043b\u0430\u0434\u0435\u043b\u0435\u0446","collections":"\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438","name":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","description":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435","emptyMessage":"\u041d\u0435\u0442 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439"},"delete":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c","appointAdmin":"\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u0410\u0434\u043c\u0438\u043d\u043e\u043c","removeAdmin":"\u0421\u043d\u044f\u0442\u044c \u0410\u0434\u043c\u0438\u043d\u0430","block":"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c","unblock":"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c","email":"\u041f\u043e\u0447\u0442\u0430","username":"\u0418\u043c\u044f","role":"\u0420\u043e\u043b\u044c","status":"\u0421\u0442\u0430\u0442\u0443\u0441","selectAll":"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0412\u0441\u0435","type":"\u0422\u0438\u043f","createCollection":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e","name":"\u0418\u043c\u044f","theme":"\u0422\u0435\u043c\u0430","alcohol":"\u0410\u043b\u043a\u043e\u0433\u043e\u043b\u044c","books":"\u041a\u043d\u0438\u0433\u0438","coins":"\u041c\u043e\u043d\u0435\u0442\u044b","addField":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u0435","numberField":"\u0427\u0438\u0441\u043b\u043e\u0432\u043e\u0435 \u043f\u043e\u043b\u0435","textField":"\u0422\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0435 \u043f\u043e\u043b\u0435","dateField":"\u041f\u043e\u043b\u0435 \u0434\u043b\u044f \u0434\u0430\u0442\u044b","inlineTextField":"\u041e\u0434\u043d\u043e\u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e\u0435 \u043f\u043e\u043b\u0435","checkboxField":"\u0424\u043b\u0430\u0436\u043e\u043a","advancedField":"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f","collectionImage":"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438","enterName":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u043c\u044f","shortDescription":"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435","description":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 (\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 markdown)","showMore":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435","save":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c","cancel":"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c","editCollection":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c","changeItemFields":"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044f \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432","createNewItem":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u041d\u043e\u0432\u044b\u0439 \u041f\u0440\u0435\u0434\u043c\u0435\u0442","descriptionB":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435","items":"\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u044b","emptyMessage":"\u041d\u0435\u0442 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432","createItem":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u043c\u0435\u0442","itemName":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0430","tags":"\u0422\u0435\u0433\u0438","itemImage":"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0430","signIn":"\u0412\u043e\u0439\u0442\u0438","signUp":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f","password":"\u041f\u0430\u0440\u043e\u043b\u044c","editItem":"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u041f\u0440\u0435\u0434\u043c\u0435\u0442","edit":"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c","itemInfo":"\u041e \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0435","comments":"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438","commentsMessage":"\u0417\u0434\u0435\u0441\u044c \u0435\u0449\u0435 \u043d\u0435\u0442 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432, \u0431\u0443\u0434\u044c \u043f\u0435\u0440\u0432\u044b\u043c","send":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"},"en":{"header":{"home":"Home","collections":"Collections","search":"Search","logout":"Logout","signin":"Sign In","signup":"Sign Up"},"collections":{"collection":"Collection","collection2":"Collection","create":"Create","collections":"Collections","owner":"Owner","name":"Name","description":"Description","emptyMessage":"There are no collections"},"delete":"Delete","appointAdmin":"Appoint Admin","removeAdmin":"Remove Admin","block":"Block","unblock":"Unblock","email":"email","username":"Username","role":"Role","status":"Status","selectAll":"Select All","type":"type","createCollection":"Create Collection","name":"Name","theme":"Theme","alcohol":"Alcohol","books":"Books","coins":"Coins","addField":"Add Field","numberField":"Number Field","textField":"Text Field","dateField":"Date Field","inlineTextField":"Inline Text Field","checkboxField":"Checkbox Field","advancedField":"Advanced Field","collectionImage":"Collection Image","enterName":"Enter Name","shortDescription":"Short Description","description":"description (markdown support)","showMore":"Show More","save":"Save","cancel":"Cancel","editCollection":"Edit Collection","changeItemFields":"Change Item Fields","createNewItem":"Create New Item","descriptionB":"Description","items":"Items","emptyMessage":"There are no items","createItem":"Create Item","itemName":"Item Name","tags":"Tags","itemImage":"Item Image","signIn":"Sign In","signUp":"Sign Up","password":"Password","editItem":"Edit Item","edit":"Edit","itemInfo":"Item Info","comments":"Comments","commentsMessage":"There are no comments, be the first","send":"Send"}}')},395:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),r=n(24),s=n.n(r),i=(n(182),n(183),n(127)),o=n(12),l=n(9),j=n.n(l),u=n(10),d=n(7),b=n(400),h=n(172),m=n(414),O=n(401),p=n(173),x=n(415),f=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),s=Object(d.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(null),b=Object(d.a)(l,2),h=b[0],m=b[1];return{loading:n,error:i,request:Object(a.useCallback)(function(){var e=Object(u.a)(j.a.mark((function e(t){var n,a,r,s,i,l=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"GET",a=l.length>2&&void 0!==l[2]?l[2]:null,r=l.length>3&&void 0!==l[3]?l[3]:{},c(!0),e.prev=4,a&&"application/json"===r["Content-Type"]&&(a=JSON.stringify(a)),e.next=8,fetch(t,{method:n,body:a,headers:r});case 8:return s=e.sent,e.next=11,s.json();case 11:if(i=e.sent,s.ok){e.next=14;break}throw new Error(i.message||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 14:return c(!1),o(null),m("\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e."),e.abrupt("return",i);case 20:e.prev=20,e.t0=e.catch(4),c(!1),m(!1),o(e.t0.message);case 25:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t){return e.apply(this,arguments)}}(),[]),success:h}},g=n(6),y=n(19);function v(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),i=Object(d.a)(s,2),o=i[0],l=i[1],v=Object(a.useState)(""),k=Object(d.a)(v,2),w=k[0],S=k[1],C=f(),N=C.loading,I=C.error,T=C.request,E=C.success,_=Object(g.c)((function(e){return e.language})),L=Object(g.c)((function(e){return e.theme}));function F(){return(F=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,T("/api/auth/register","POST",{email:n,username:o,password:w,role:"User"},{"Content-Type":"application/json"});case 4:null===I&&(r(""),l(""),S("")),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(c.jsx)(b.a,{className:"mt-4 py-5 bg-"+("dark"===L?"semi-dark":"white")+" text-"+("dark"===L?"white-50":"dark"),children:Object(c.jsx)(h.a,{lg:{span:6,offset:3},children:Object(c.jsxs)(m.a,{children:[Object(c.jsxs)(m.a.Group,{controlId:"email",children:[Object(c.jsx)(m.a.Label,{children:y[_].email}),Object(c.jsx)(m.a.Control,{type:"email",placeholder:"Enter email",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(c.jsxs)(m.a.Group,{controlId:"username",children:[Object(c.jsx)(m.a.Label,{children:y[_].username}),Object(c.jsx)(m.a.Control,{type:"text",placeholder:y[_].enterName,value:o,onChange:function(e){return l(e.target.value)}})]}),Object(c.jsxs)(m.a.Group,{controlId:"password",children:[Object(c.jsx)(m.a.Label,{children:y[_].password}),Object(c.jsx)(m.a.Control,{type:"password",placeholder:y[_].password,value:w,onChange:function(e){return S(e.target.value)}})]}),Object(c.jsx)(O.a,{style:{color:I?"red":"green",marginLeft:0},children:Object(c.jsx)("span",{children:I||E})}),Object(c.jsx)(p.a,{variant:"primary",type:"submit",onClick:function(e){return F.apply(this,arguments)},disabled:N,children:y[_].signUp}),Object(c.jsx)(x.a,{children:Object(c.jsx)(x.a.Link,{href:"/signIn",style:{padding:0,marginTop:"10px"},children:y[_].signIn})})]})})})}var k=n(174);function w(e,t){return S.apply(this,arguments)}function S(){return(S=Object(u.a)(j.a.mark((function e(t,n){var c,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=JSON.stringify({token:t}),e.next=4,fetch("/api/auth/auth",{method:"POST",body:c,headers:{"Content-Type":"application/json"}});case 4:return a=e.sent,e.next=7,a.json();case 7:if(r=e.sent,console.log("auth",r),!r.ok){e.next=16;break}return n({type:"AUTH_USER",payload:{id:r.user._id,role:r.user.role}}),n({type:"SET_THEME",payload:r.user.theme}),n({type:"SET_LANGUAGE",payload:r.user.language}),e.abrupt("return",r);case 16:n({type:"LOGOUT_USER"}),n({type:"SET_THEME",payload:localStorage.getItem("theme")||"light"}),n({type:"SET_LANGUAGE",payload:localStorage.getItem("language")||"rus"});case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})))).apply(this,arguments)}var C=n(19);function N(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),i=Object(d.a)(s,2),o=i[0],l=i[1],y=f(),v=y.loading,S=y.error,N=y.request,I=Object(g.b)(),T=Object(g.c)((function(e){return e.language})),E=Object(g.c)((function(e){return e.theme}));function _(e,t){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(j.a.mark((function e(t,n){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N("/api/auth/login","POST",{type:t,user:n},{"Content-Type":"application/json"});case 3:if(!(c=e.sent).ok){e.next=10;break}return localStorage.setItem("token",c.token),localStorage.setItem("userId",c.user._id),localStorage.setItem("type",t),e.next=10,w(c.token,I);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){window.VK.Widgets.Auth("vk_auth",{onAuth:function(e){return _("vk",e)}})}),[]),Object(c.jsx)(b.a,{className:"mt-4 py-5 bg-"+("dark"===E?"semi-dark":"white")+" text-"+("dark"===E?"white-50":"dark"),children:Object(c.jsx)(h.a,{lg:{span:6,offset:3},children:Object(c.jsxs)(m.a,{children:[Object(c.jsxs)(m.a.Group,{controlId:"username",children:[Object(c.jsx)(m.a.Label,{children:C[T].username}),Object(c.jsx)(m.a.Control,{type:"text",placeholder:C[T].enterName,value:n,onChange:function(e){return r(e.target.value)}})]}),Object(c.jsxs)(m.a.Group,{controlId:"password",children:[Object(c.jsx)(m.a.Label,{children:C[T].password}),Object(c.jsx)(m.a.Control,{type:"password",placeholder:C[T].password,value:o,onChange:function(e){return l(e.target.value)}})]}),Object(c.jsx)(O.a,{style:{color:"red",marginLeft:0},children:Object(c.jsx)("span",{children:S})}),Object(c.jsx)(p.a,{variant:"primary",type:"submit",onClick:function(){return _("common",{username:n,password:o})},disabled:v,children:C[T].signIn}),Object(c.jsx)(O.a,{style:{marginTop:"10px",marginLeft:0},children:Object(c.jsx)(k.GoogleLogin,{clientId:"808424836478-45hk3q9s4jbhlc9thn8sud56g7ff1u3m.apps.googleusercontent.com",redirectUri:"http://localhost:3000",onSuccess:function(e){return _("google",e.profileObj)},cookiePolicy:"single_host_origin"})}),Object(c.jsx)(O.a,{style:{marginTop:"10px",marginLeft:0},children:Object(c.jsx)("div",{id:"vk_auth"})}),Object(c.jsx)(x.a,{children:Object(c.jsx)(x.a.Link,{href:"/signUp",style:{padding:0,marginTop:"10px"},children:C[T].signUp})})]})})})}var I=n(41),T=n.n(I),E=n(42),_=n.n(E),L=n(417),F=n(402),A=n(403);var U=function(e){var t=e.item,n=e.size,a=Object(g.c)((function(e){return e.theme}));return Object(c.jsx)(h.a,{xl:n,lg:n+1,md:4,sm:6,xs:12,children:Object(c.jsxs)(L.a,{className:"my-3"+("dark"===a?"text-white bg-dark":"bg-light"),style:{width:"185px",margin:"auto"},children:[Object(c.jsx)(T.a,{cloudName:"itransit",publicId:t.img_id,format:t.img_format,children:Object(c.jsx)(_.a,{crop:"fill",gravity:"faces",width:"185",height:"150"})}),Object(c.jsxs)(L.a.Body,{children:[Object(c.jsx)(L.a.Title,{children:t.name}),t.fields.map((function(e,t){return Object(c.jsxs)(L.a.Text,{children:[Object(c.jsx)("strong",{children:e.name+": "})," ","checkbox"!==e.type?e.value?e.value:"empty":e.value?Object(c.jsx)(A.a,{style:{color:"#42b32c",fontSize:"24px"}}):Object(c.jsx)(F.a,{style:{color:"#e22b2b",fontSize:"24px"}})]},t)})),Object(c.jsx)(p.a,{variant:"primary",onClick:function(){window.location="/item/"+t._id},children:"Show More"})]}),Object(c.jsx)(L.a.Footer,{children:Object(c.jsxs)(O.a,{children:[Object(c.jsx)(h.a,{xs:6,className:"px-0",children:Object(c.jsxs)(L.a.Text,{style:{fontSize:"13px"},children:["likes: ",t.likes.length]})}),Object(c.jsx)(h.a,{className:"px-0",children:Object(c.jsxs)(L.a.Text,{style:{fontSize:"13px"},children:["comments: ",t.comments.length]})})]})})]})})},G=n(19);var D=function(e){var t=e.items,n=e.size,a=Object(g.c)((function(e){return e.language})),r=Object(g.c)((function(e){return e.theme}));return Object(c.jsxs)(b.a,{style:{display:"flex",flexWrap:"wrap",flexDirection:"row"},className:"mt-4 py-3 bg-"+("dark"===r?"semi-dark":"white")+" text-"+("dark"===r?"white-50":"dark"),fluid:!0,children:[Object(c.jsx)(O.a,{className:"w-100 justify-content-center mb-3 mx-auto",children:Object(c.jsx)("h1",{children:G[a].items})}),Object(c.jsx)(O.a,{className:"w-100 mt-3 m-auto",children:t&&t.length>0?t.map((function(e,t){return Object(c.jsx)(U,{item:e,size:n},t)})):Object(c.jsx)("h5",{className:"text-center w-100",children:G[a].emptyMessage})})]})},P=n(16),M=n.n(P);var q=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],r=t[1],s=f(),i=s.request,o=s.loading;function l(){return(l=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i("/api/collections/getAllItems","GET");case 2:(t=e.sent)&&t.ok&&r(t.items.slice(t.items.length-7>0&&t.items.length-7));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){(function(){return l.apply(this,arguments)})().then()}),[]),Object(c.jsx)(b.a,{children:o&&n?Object(c.jsx)(O.a,{className:"justify-content-md-center",children:Object(c.jsx)(M.a,{type:"spin",color:"#000000",height:60,width:60})}):Object(c.jsx)(D,{items:n,size:3})})},z=n(92),B=n.n(z),R=n(19);var H=function(e){var t=e.collection,n=Object(g.c)((function(e){return e.language})),a=Object(g.c)((function(e){return e.theme}));return Object(c.jsx)(h.a,{xl:4,md:6,xs:12,children:Object(c.jsxs)(L.a,{className:"my-3"+("dark"===a?"text-white bg-dark":"bg-light"),style:{width:"276px",margin:"auto"},children:[Object(c.jsx)(T.a,{cloudName:"itransit",publicId:t.img_id,format:t.img_format,children:Object(c.jsx)(_.a,{crop:"fill",gravity:"faces",width:"276",height:"190"})}),Object(c.jsxs)(L.a.Body,{children:[Object(c.jsx)(L.a.Title,{children:t.name}),Object(c.jsx)(B.a,{className:"card-text",children:t.description}),Object(c.jsx)(p.a,{variant:"primary",onClick:function(){window.location="/collection/"+t._id},children:R[n].showMore})]}),Object(c.jsx)(L.a.Footer,{children:Object(c.jsx)(O.a,{className:"justify-content-center",children:Object(c.jsxs)(L.a.Text,{style:{fontSize:"16px"},children:["items: ",t.items]})})})]})})},J=n(19);var V=function(e){var t=e.collections,n=Object(g.c)((function(e){return e.language})),a=Object(g.c)((function(e){return e.theme}));return Object(c.jsxs)(b.a,{style:{display:"flex",flexWrap:"wrap",flexDirection:"row"},className:"mt-4 py-3 bg-"+("dark"===a?"semi-dark":"white")+" text-"+("dark"===a?"white-50":"dark"),fluid:!0,children:[Object(c.jsx)(O.a,{className:"w-100 mb-3 justify-content-center mx-auto",children:Object(c.jsx)("h1",{children:J[n].collections.collections})}),Object(c.jsx)(O.a,{className:"w-100 mt-3 m-auto",children:t&&t.length>0?t.map((function(e,t){return Object(c.jsx)(H,{collection:e,index:t},t)})):Object(c.jsx)("h5",{className:"text-center w-100",children:J[n].collections.emptyMessage})})]})};var K=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],r=t[1],s=f(),i=s.request,o=s.loading;function l(){return(l=Object(u.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i("/api/collections/getAllCollections","GET");case 2:(t=e.sent)&&t.ok&&(n=t.collections.sort((function(e,t){return t.items>e.items?1:-1})).slice(0,t.collections.length>=3?3:t.collections.length),r(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){(function(){return l.apply(this,arguments)})().then()}),[]),Object(c.jsx)(b.a,{children:o?Object(c.jsx)(O.a,{className:"justify-content-md-center",children:Object(c.jsx)(M.a,{type:"spin",color:"#000000",height:60,width:60})}):Object(c.jsx)(V,{collections:n})})};function Z(){return Object(c.jsxs)(b.a,{className:"py-5",children:[Object(c.jsx)(q,{}),Object(c.jsx)(K,{})]})}var W=n(405),Q=n(404);var X=function(e){var t=e.user,n=e.index,r=Object(g.b)(),s=Object(a.useState)(!1),i=Object(d.a)(s,2),o=i[0],l=i[1],j=Object(g.c)((function(e){return e.selected}));return Object(a.useEffect)((function(){var e=!1;j.map((function(n){return n===t&&(e=!0,l(!0)),null})),e||l(!1)}),[j,t]),Object(c.jsxs)("tr",{onClick:function(e){"checkbox"!==e.target.name&&(window.location="/collections/"+t._id)},children:[Object(c.jsx)("td",{className:"d-none d-sm-table-cell",children:n}),Object(c.jsx)("td",{className:"d-none d-md-table-cell",children:t.email}),Object(c.jsx)("td",{children:t.username||t.first_name+" "+t.last_name}),Object(c.jsx)("td",{children:t.role}),Object(c.jsx)("td",{className:"d-none d-sm-table-cell",children:t.type}),Object(c.jsx)("td",{children:t.status}),Object(c.jsx)("td",{className:"px-4",children:Object(c.jsx)(O.a,{className:"justify-content-center",children:Object(c.jsx)(Q.a.Checkbox,{onChange:function(e){e.target.checked?r({type:"SELECT_USER",payload:t}):r({type:"UNSELECT_USER",payload:t})},checked:o,name:"checkbox"})})})]})},Y=n(19);var $=function(e){var t=e.usersData,n=e.loading,r=e.error,s=Object(a.useState)([]),i=Object(d.a)(s,2),o=i[0],l=i[1],j=Object(g.b)(),u=Object(g.c)((function(e){return e.selected})),h=Object(g.c)((function(e){return e.language})),m=Object(g.c)((function(e){return e.theme}));return Object(a.useEffect)((function(){l(t.map((function(e,t){return Object(c.jsx)(X,{user:e,index:t},t)})))}),[t]),Object(c.jsxs)(b.a,{fluid:!0,children:[Object(c.jsxs)(W.a,{striped:!0,bordered:!0,hover:!0,variant:m,children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{className:"d-none d-sm-table-cell ",children:"#"}),Object(c.jsx)("th",{className:"d-none d-md-table-cell ",children:Y[h].email}),Object(c.jsx)("th",{children:Y[h].username}),Object(c.jsx)("th",{children:Y[h].role}),Object(c.jsx)("th",{className:"d-none d-sm-table-cell ",children:Y[h].type}),Object(c.jsx)("th",{children:Y[h].status}),Object(c.jsx)("th",{children:Object(c.jsxs)(O.a,{className:"justify-content-center",children:[Object(c.jsx)("span",{className:"d-none d-md-flex",style:{marginRight:"10px"},children:Y[h].selectAll}),Object(c.jsx)(Q.a.Checkbox,{checked:t.length===u.length,onChange:function(e){e.target.checked?j({type:"SELECT_ALL",payload:t}):j({type:"UNSELECT_ALL"})}})]})})]})}),Object(c.jsx)("tbody",{children:o.length<=0?[]:o})]}),n?Object(c.jsx)(O.a,{className:"justify-content-md-center",children:Object(c.jsx)(M.a,{type:"spin",color:"#000000",height:60,width:60})}):r]})},ee=n(406),te=n(407),ne=n(19);var ce=function(e){var t=e.load,n=Object(g.c)((function(e){return e.selected})),r=Object(g.c)((function(e){return e.language})),s=f(),i=s.request,o=s.loading,l=Object(g.b)();function d(e){return h.apply(this,arguments)}function h(){return(h=Object(u.a)(j.a.mark((function e(c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.map(function(){var e=Object(u.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i("/api/users/"+c,"POST",{_id:n._id,type:localStorage.getItem("type"),token:localStorage.getItem("token")},{"Content-Type":"application/json"});case 2:t(),l({type:"UNSELECT_ALL"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){console.log(n)}),[n]),Object(c.jsx)(b.a,{fluid:!0,style:{padding:"10px",alignItems:"center",display:"flex"},children:Object(c.jsxs)(ee.a,{"aria-label":"admin-control-panel",children:[Object(c.jsxs)(te.a,{"aria-label":"controls-1",className:"mr-5",children:[Object(c.jsx)(p.a,{variant:"primary",disabled:o,onClick:function(){return d("appointAdmin")},className:"mr-2",children:ne[r].appointAdmin}),Object(c.jsx)(p.a,{variant:"danger",onClick:function(){return d("removeAdmin")},disabled:o,className:"mr-2",children:ne[r].removeAdmin}),Object(c.jsx)(p.a,{variant:"danger",onClick:function(){return d("deleteUser")},disabled:o,children:ne[r].delete})]}),Object(c.jsxs)(te.a,{"aria-label":"controls-2",className:"mt-2 mt-sm-0",children:[Object(c.jsx)(p.a,{variant:"danger",disabled:o,className:"mr-2",onClick:function(){return d("blockUser")},children:ne[r].block}),Object(c.jsx)(p.a,{variant:"success",disabled:o,onClick:function(){return d("unblockUser")},children:ne[r].unblock})]})]})})};var ae=function(){var e=f(),t=e.loading,n=e.request,r=e.error,s=Object(a.useState)([]),i=Object(d.a)(s,2),o=i[0],l=i[1];function h(){return m.apply(this,arguments)}function m(){return(m=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("/api/users/getUsers");case 2:(t=e.sent)&&l(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){h().then()}),[]),Object(c.jsxs)(b.a,{fluid:!0,children:[Object(c.jsx)(ce,{load:h}),Object(c.jsx)($,{usersData:o,loading:t,error:r})]})},re=n(416),se=n(412),ie=n(175),oe=n(408),le=n(19);function je(){var e=Object(g.c)((function(e){return e.language})),t=Object(g.b)(),n=f().request;function a(){return(a=Object(u.a)(j.a.mark((function e(c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,n("/api/users/setLanguage","POST",{token:localStorage.getItem("token"),language:c.target.innerText},{"Content-Type":"application/json"});case 3:localStorage.setItem("language",c.target.innerText),t({type:"SET_LANGUAGE",payload:c.target.innerText});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.jsxs)(se.a,{className:"mr-2",children:[Object(c.jsx)(se.a.Toggle,{variant:"outline-primary",id:"dropdown-basic",children:e}),Object(c.jsx)(se.a.Menu,{children:Object(c.jsx)(se.a.Item,{onClick:function(e){return a.apply(this,arguments)},children:"rus"===e?"en":"rus"})})]})}function ue(){var e=Object(g.c)((function(e){return e.theme})),t=Object(g.b)(),n=f().request;function a(){return(a=Object(u.a)(j.a.mark((function e(c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("/api/users/setTheme","POST",{token:localStorage.getItem("token"),theme:c.target.innerText},{"Content-Type":"application/json"});case 2:localStorage.setItem("theme",c.target.innerText),t({type:"SET_THEME",payload:c.target.innerText});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.jsxs)(se.a,{className:"mr-md-4 mr-2",children:[Object(c.jsx)(se.a.Toggle,{variant:"outline-primary",id:"dropdown-basic",children:e}),Object(c.jsx)(se.a.Menu,{children:Object(c.jsx)(se.a.Item,{onClick:function(e){return a.apply(this,arguments)},children:"light"===e?"dark":"light"})})]})}function de(e){var t=e.isLogged,n=e.logout,r=e.lang,s=e.text,i=e.search,o=e.setText,l=Object(a.useState)(!1),j=Object(d.a)(l,2),u=j[0],b=j[1];return Object(c.jsx)(h.a,{className:"d-flex d-md-none justify-content-end",children:Object(c.jsxs)(O.a,{className:"w-100 justify-content-end",children:[Object(c.jsx)(O.a,{className:"w-100 justify-content-end pr-4",children:Object(c.jsx)(oe.a,{style:{fontSize:"28px"},onClick:function(){return b(!u)}})}),Object(c.jsx)(ie.a,{in:u,children:Object(c.jsx)(O.a,{className:"d-"+(u?"flex":"none"),children:Object(c.jsxs)(h.a,{children:[Object(c.jsx)(je,{}),Object(c.jsx)(ue,{}),t?Object(c.jsx)(p.a,{variant:"outline-danger",onClick:n,className:"mr-md-4",children:le[r].header.logout}):[],Object(c.jsx)(m.a,{inline:!0,className:"w-auto",children:Object(c.jsxs)(O.a,{className:"d-none d-md-inline",children:[Object(c.jsx)(m.a.Control,{type:"text",placeholder:le[r].header.search,className:"mr-sm-2",value:s,onChange:function(e){return o(e.target.value)}}),Object(c.jsx)(p.a,{variant:"outline-info",onClick:i,children:le[r].header.search})]})})]})})})]})})}var be=function(e){var t=e.isLogged,n=Object(g.b)(),r=Object(g.c)((function(e){return e.userId})),s=Object(g.c)((function(e){return e.language})),i=Object(g.c)((function(e){return e.theme})),o=Object(a.useState)(""),l=Object(d.a)(o,2),j=l[0],u=l[1];function b(){"google"===localStorage.getItem("type")?window.open("https://mail.google.com/mail/u/0/?logout&hl=en","_blank"):"VK"===localStorage.getItem("type")&&window.VK.Auth.logout((function(e){console.log(e)})),window.location="/signIn",localStorage.clear(),n({type:"LOGOUT_USER"})}function f(){window.location="/search/"+j}return Object(c.jsxs)(re.a,{bg:i,variant:i,className:"w-100 bg-"+i,children:[Object(c.jsxs)(x.a,{className:"mr-auto",children:[Object(c.jsx)(x.a.Link,{href:"/",children:le[s].header.home}),t?[Object(c.jsx)(x.a.Link,{href:"/collections/"+String(r),children:le[s].header.collections},0),Object(c.jsx)(x.a.Link,{href:"/search/",children:le[s].header.search},1)]:[Object(c.jsx)(x.a.Link,{href:"/search/",children:le[s].header.search},2),Object(c.jsx)(x.a.Link,{href:"/signUp",children:le[s].header.signup},0),Object(c.jsx)(x.a.Link,{href:"/signIn",children:le[s].header.signin},1)]]}),Object(c.jsx)(h.a,{className:"d-none d-md-flex justify-content-end w-100",children:Object(c.jsxs)(O.a,{children:[Object(c.jsx)(je,{}),Object(c.jsx)(ue,{}),t?Object(c.jsx)(p.a,{variant:"outline-danger",onClick:b,className:"mr-md-4",children:le[s].header.logout}):[],Object(c.jsx)(m.a,{inline:!0,className:"w-auto",children:Object(c.jsxs)(O.a,{className:"d-none d-md-inline",children:[Object(c.jsx)(m.a.Control,{type:"text",placeholder:le[s].header.search,className:"mr-sm-2",value:j,onChange:function(e){return u(e.target.value)}}),Object(c.jsx)(p.a,{variant:"outline-info",onClick:f,children:le[s].header.search})]})})]})}),Object(c.jsx)(de,{logout:b,text:j,setText:u,lang:s,isLogged:{isLogged:t},search:f})]})},he=n(32),me=n(44),Oe=n(11),pe=n(413),xe=n(45),fe=(n(382),n(19));var ge=function(e){var t=e.show,n=e.hide,r=e.create,s=e.loading,i=e.error,o=Object(g.c)((function(e){return e.language})),l=Object(a.useState)("en"===o?"Click or drop your file here":"\u041d\u0430\u0436\u043c\u0438 \u0438\u043b\u0438 \u0441\u0431\u0440\u043e\u0441\u044c \u0441\u0432\u043e\u0439 \u0444\u0430\u0439\u043b \u0441\u044e\u0434\u0430"),j=Object(d.a)(l,2),u=j[0],b=j[1],h=Object(a.useState)("#888"),x=Object(d.a)(h,2),f=x[0],y=x[1],v=Object(a.useState)("number"),k=Object(d.a)(v,2),w=k[0],S=k[1],C=Object(a.useState)(""),N=Object(d.a)(C,2),I=N[0],T=N[1],E=Object(a.useState)([]),_=Object(d.a)(E,2),L=_[0],F=_[1],A=Object(a.useState)({file:null,imgUrl:"",name:"",theme:"Alcohol",description:"",advancedFields:L}),U=Object(d.a)(A,2),G=U[0],D=U[1];function P(e,t){D(Object(Oe.a)(Object(Oe.a)({},G),{},Object(me.a)({},t,e)))}return Object(a.useEffect)((function(){D(Object(Oe.a)(Object(Oe.a)({},G),{},{advancedFields:L}))}),[L]),Object(c.jsxs)(pe.a,{show:t,onHide:n,children:[Object(c.jsx)(pe.a.Header,{closeButton:!0,children:Object(c.jsx)(pe.a.Title,{children:fe[o].createCollection})}),Object(c.jsx)(pe.a.Body,{children:Object(c.jsxs)(m.a,{children:[Object(c.jsxs)(m.a.Group,{controlId:"collectionName",children:[Object(c.jsx)(m.a.Label,{children:fe[o].name}),Object(c.jsx)(m.a.Control,{type:"text",onChange:function(e){return P(e.target.value,"name")},value:G.name,placeholder:fe[o].enterName})]}),Object(c.jsxs)(m.a.Group,{controlId:"themeSelect",children:[Object(c.jsx)(m.a.Label,{children:fe[o].theme}),Object(c.jsxs)(m.a.Control,{as:"select",onChange:function(e){return P(e.target.value,"theme")},value:G.theme,children:[Object(c.jsx)("option",{value:"Alcohol",children:fe[o].alcohol}),Object(c.jsx)("option",{value:"Books",children:fe[o].books}),Object(c.jsx)("option",{value:"Coins",children:fe[o].coins})]})]}),Object(c.jsxs)(m.a.Group,{children:[Object(c.jsx)(m.a.Text,{children:fe[o].addField}),Object(c.jsxs)(m.a.Control,{as:"select",onChange:function(e){return S(e.target.value)},value:w,children:[Object(c.jsx)("option",{value:"number",children:fe[o].numberField}),Object(c.jsx)("option",{value:"text",children:fe[o].textField}),Object(c.jsx)("option",{value:"date",children:fe[o].dateField}),Object(c.jsx)("option",{value:"checkbox",children:fe[o].checkboxField}),Object(c.jsx)("option",{value:"input",children:fe[o].inlineTextField})]}),Object(c.jsx)(O.a,{children:Object(c.jsx)("p",{style:{color:"red",margin:"0 auto"},children:I})}),Object(c.jsx)(O.a,{children:Object(c.jsx)(p.a,{onClick:function(){var e=1;L.map((function(t){return t.type===w&&e++,null})),e>3?T("\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u043f\u043e\u043b\u0435\u0439 \u0442\u0430\u043a\u043e\u0433\u043e \u0442\u0438\u043f\u0430 3"):(F([].concat(Object(he.a)(L),[{type:w,name:""}])),T(""))},variant:"outline-primary mt-2 mx-auto w-50",children:fe[o].addField})})]}),Object(c.jsxs)(m.a.Group,{controlId:"themeSelect",children:[Object(c.jsx)(m.a.Text,{children:fe[o].advancedField}),L.map((function(e,t){return"text"===e.type?Object(c.jsx)(m.a.Control,{as:"textarea",placeholder:"Enter name of textarea",onChange:function(e){L[t].name=e.target.value},className:"mt-2",rows:3},t):Object(c.jsx)(m.a.Control,{type:"input",placeholder:"Enter name of "+e.type+" field",className:"mt-2",onChange:function(e){L[t].name=e.target.value}},t)}))]}),Object(c.jsxs)(m.a.Group,{controlId:"description",children:[Object(c.jsx)(m.a.Label,{children:fe[o].collectionImage}),Object(c.jsx)(xe.StyledDropZone,{onMouseEnter:function(){"#888"===f&&y("#46b2ae")},onMouseLeave:function(){"#46b2ae"===f&&y("#888")},children:u,style:{borderColor:f},onDrop:function(e){var t=e.name.length<12?e.name:e.name.substr(0,9)+"...";D(Object(Oe.a)(Object(Oe.a)({},G),{},{file:e})),b(("rus"===o?"\u0424\u0430\u0439\u043b \u0432\u044b\u0431\u0440\u0430\u043d (":"File selected (")+t+")"),y("#74d239")}})]}),Object(c.jsxs)(m.a.Group,{controlId:"description",children:[Object(c.jsx)(m.a.Label,{children:fe[o].shortDescription}),Object(c.jsx)(m.a.Control,{as:"textarea",rows:4,placeholder:fe[o].description,onChange:function(e){return P(e.target.value,"description")},value:G.description})]})]})}),Object(c.jsxs)(pe.a.Footer,{className:"container align-items-md-center",children:[Object(c.jsx)(O.a,{className:"justify-content-md-center w-100",children:Object(c.jsx)("span",{className:"my-1",style:{color:"red"},children:i||""})}),s?Object(c.jsx)(O.a,{className:"justify-content-md-center w-100",children:Object(c.jsx)(M.a,{type:"spin",color:"#000000",height:30,width:30})}):Object(c.jsx)(O.a,{className:"justify-content-md-center w-100",children:Object(c.jsx)(p.a,{variant:"outline-success",onClick:function(){return r(G)},children:fe[o].createCollection})})]})]})},ye=n(19);var ve=function(e){var t=e.owner,n=e.loadCollections,r=Object(g.c)((function(e){return e.role})),s=Object(g.c)((function(e){return e.language})),i=Object(g.c)((function(e){return e.theme})),o=Object(g.c)((function(e){return e.userId})),l=Object(a.useState)(!1),b=Object(d.a)(l,2),h=b[0],m=b[1],x=f(),y=x.loading,v=x.request,k=x.error;function w(){return(w=Object(u.a)(j.a.mark((function e(c){var a,r,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",c.file),e.next=4,v("/api/files/fileUpload","POST",a);case 4:if(!(r=e.sent)||!r.ok){e.next=14;break}return c.img_id=r.img_id,c.img_format=r.img_format,c.userId=t._id,c.token=localStorage.getItem("token"),e.next=12,v("/api/collections/createCollection","POST",c,{"Content-Type":"application/json"});case 12:(s=e.sent)&&s.ok&&(m(!1),n().then());case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.jsxs)(re.a,{className:"px-mg-5 px-4 mt-2 justify-content-between bg-"+("dark"===i?"semi-dark":"white")+" text-"+("dark"===i?"white-50":"dark"),children:[Object(c.jsx)(O.a,{children:Object(c.jsxs)("span",{children:[Object(c.jsx)("strong",{children:ye[s].collections.owner}),": ",t.username]})}),Object(c.jsx)(O.a,{children:"Admin"===r||o===t._id?Object(c.jsxs)(p.a,{variant:"outline-success",onClick:function(){return m(!0)},children:[ye[s].collections.create," ",Object(c.jsx)("span",{className:"d-none d-sm-inline",children:ye[s].collections.collection2})]}):[]}),Object(c.jsx)(ge,{show:h,hide:function(){return m(!1)},create:function(e){return w.apply(this,arguments)},loading:y,error:k})]})};var ke=function(){var e=Object(o.g)().ownerId,t=(Object(g.c)((function(e){return e.language})),Object(a.useState)([])),n=Object(d.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)({}),l=Object(d.a)(i,2),h=l[0],m=l[1],p=f(),x=p.request,y=p.loading,v=p.error;function k(){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x("/api/collections/getCollections","POST",{id:e},{"Content-Type":"application/json"});case 2:(n=t.sent)&&(s(n.collections),m(n.owner));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){e&&k().then()}),[e]),Object(c.jsxs)(b.a,{children:[Object(c.jsx)(ve,{owner:h,loadCollections:k}),Object(c.jsx)("span",{style:{color:"red"},children:v||""}),y?Object(c.jsx)(O.a,{className:"justify-content-md-center",children:Object(c.jsx)(M.a,{type:"spin",color:"#000000",height:60,width:60})}):Object(c.jsx)(V,{collections:r})]})},we=n(97),Se=n.n(we),Ce=(n(384),n(19));var Ne=function(e){var t=e.create,n=e.loading,r=e.error,s=e.show,i=e.hide,o=e.fields,l=Object(g.c)((function(e){return e.language})),j=Object(a.useState)("en"===l?"Click or drop your file here":"\u041d\u0430\u0436\u043c\u0438 \u0438\u043b\u0438 \u0441\u0431\u0440\u043e\u0441\u044c \u0441\u0432\u043e\u0439 \u0444\u0430\u0439\u043b \u0441\u044e\u0434\u0430"),u=Object(d.a)(j,2),b=u[0],h=u[1],x=Object(a.useState)("#888"),f=Object(d.a)(x,2),y=f[0],v=f[1],k=Object(a.useState)({fields:o,name:"",tags:[]}),w=Object(d.a)(k,2),S=w[0],C=w[1],N=Object(a.useState)(null),I=Object(d.a)(N,2),T=I[0],E=I[1];return Object(a.useEffect)((function(){C(Object(Oe.a)(Object(Oe.a)({},S),{},{fields:o}))}),[o]),Object(c.jsxs)(pe.a,{show:s,onHide:i,children:[Object(c.jsx)(pe.a.Header,{closeButton:!0,children:Object(c.jsx)(pe.a.Title,{children:Ce[l].createItem})}),Object(c.jsxs)(pe.a.Body,{children:[Object(c.jsxs)(m.a.Group,{children:[Object(c.jsx)(m.a.Label,{children:Ce[l].itemName}),Object(c.jsx)(m.a.Control,{type:"text",onChange:function(e){return C(Object(Oe.a)(Object(Oe.a)({},S),{},{name:e.target.value}))}})]}),Object(c.jsxs)(m.a.Group,{children:[Object(c.jsx)(m.a.Text,{className:"mb-2",children:Ce[l].tags}),Object(c.jsx)(Se.a,{value:S.tags,onChange:function(e){return C(Object(Oe.a)(Object(Oe.a)({},S),{},{tags:e}))},addKeys:[9,13,32]})]}),Object(c.jsxs)(m.a.Group,{children:[Object(c.jsx)(m.a.Text,{children:Ce[l].advancedFields}),o.map((function(e,t){return"text"===e.type?[Object(c.jsx)(m.a.Label,{children:e.name},t),Object(c.jsx)(m.a.Control,{as:"textarea",onChange:function(e){S.fields[t].value=e.target.value}},t+1)]:[Object(c.jsx)(m.a.Label,{children:e.name},t),Object(c.jsx)(m.a.Control,{type:e.type,onChange:function(e){S.fields[t].value="checkbox"!==e.type?e.target.value:e.target.checked}},t+1)]}))]}),Object(c.jsxs)(m.a.Group,{controlId:"image",children:[Object(c.jsx)(m.a.Label,{children:Ce[l].itemImage}),Object(c.jsx)(xe.StyledDropZone,{onMouseEnter:function(){"#888"===y&&v("#46b2ae")},onMouseLeave:function(){"#46b2ae"===y&&v("#888")},children:b,style:{borderColor:y},onDrop:function(e){var t=e.name.length<12?e.name:e.name.substr(0,9)+"...";h(("rus"===l?"\u0424\u0430\u0439\u043b \u0432\u044b\u0431\u0440\u0430\u043d (":"File selected (")+t+")"),v("#74d239");var n=new FormData;n.append("file",e),E(n)}})]})]}),Object(c.jsxs)(pe.a.Footer,{className:"container align-items-md-center",children:[Object(c.jsx)(O.a,{className:"justify-content-md-center w-100",children:Object(c.jsx)("span",{className:"my-1",style:{color:"red"},children:r||""})}),n?Object(c.jsx)(O.a,{className:"justify-content-md-center w-100",children:Object(c.jsx)(M.a,{type:"spin",color:"#000000",height:30,width:30})}):Object(c.jsx)(O.a,{className:"justify-content-md-center w-100",children:Object(c.jsx)(p.a,{variant:"outline-success",onClick:function(){return t(S,T)},children:Ce[l].createItem})})]})]})},Ie=n(409),Te=n(19);var Ee=function(e){var t=e.fields,n=e.show,r=e.hide,s=e.loading,i=e.error,o=e.edit,l=Object(g.c)((function(e){return e.language})),j=Object(a.useState)([]),u=Object(d.a)(j,2),b=u[0],x=u[1],f=Object(a.useState)("number"),y=Object(d.a)(f,2),v=y[0],k=y[1],w=Object(a.useState)(""),S=Object(d.a)(w,2),C=S[0],N=S[1];return Object(a.useEffect)((function(){console.log(t),x(t)}),[t]),Object(c.jsxs)(pe.a,{show:n,onHide:r,children:[Object(c.jsx)(pe.a.Header,{closeButton:!0,children:Object(c.jsx)(pe.a.Title,{children:Te[l].changeItemFields})}),Object(c.jsxs)(pe.a.Body,{children:[Object(c.jsx)(m.a.Text,{children:Te[l].addField}),Object(c.jsxs)(m.a.Control,{as:"select",onChange:function(e){return k(e.target.value)},value:v,children:[Object(c.jsx)("option",{value:"number",children:Te[l].numberField}),Object(c.jsx)("option",{value:"text",children:Te[l].textField}),Object(c.jsx)("option",{value:"date",children:Te[l].dateField}),Object(c.jsx)("option",{value:"checkbox",children:Te[l].checkboxField}),Object(c.jsx)("option",{value:"input",children:Te[l].inlineTextField})]}),Object(c.jsx)(O.a,{children:Object(c.jsx)("p",{style:{color:"red",margin:"0 auto"},children:C})}),Object(c.jsx)(O.a,{children:Object(c.jsx)(p.a,{onClick:function(){var e=Object(he.a)(b),t=1;e.map((function(e){return e.type===v&&t++,null})),t>3?N("\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u043f\u043e\u043b\u0435\u0439 \u0442\u0430\u043a\u043e\u0433\u043e \u0442\u0438\u043f\u0430 3"):(e.push({type:v,name:v,new:!0}),x(e))},variant:"outline-primary mt-2 mx-auto w-50",children:Te[l].addField})}),Object(c.jsx)(m.a.Text,{children:Te[l].advancedFields}),b.map((function(e,t){return Object(c.jsxs)(O.a,{className:"mt-2",children:[Object(c.jsx)(h.a,{xs:11,children:Object(c.jsx)(m.a.Control,{type:"text",onChange:function(e){return function(e,t){var n=Object(he.a)(b);n[t].name=e.target.value,x(n)}(e,t)},value:b[t].name})}),Object(c.jsx)(h.a,{className:"pl-0 py-1",children:Object(c.jsx)(Ie.a,{className:"x",onClick:function(){return function(e){var t=Object(he.a)(b);t.splice(e,1),x(t)}(t)},style:{fontSize:"24px"}})})]},t)}))]}),Object(c.jsxs)(pe.a.Footer,{className:"container align-items-md-center",children:[Object(c.jsx)(O.a,{className:"justify-content-md-center w-100",children:Object(c.jsx)("span",{className:"my-1",style:{color:"red"},children:i||""})}),s?Object(c.jsx)(O.a,{className:"justify-content-md-center w-100",children:Object(c.jsx)(M.a,{type:"spin",color:"#000000",height:30,width:30})}):Object(c.jsxs)(O.a,{className:"justify-content-md-center w-100",children:[Object(c.jsx)(p.a,{variant:"outline-success",className:"mx-3",onClick:function(){return o(b)},children:Te[l].save}),Object(c.jsx)(p.a,{variant:"outline-danger",className:"mx-3",onClick:r,children:Te[l].cancel})]})]})]})},_e=n(19);var Le=function(e){var t=e.info,n=e.loadCollection,r=e.fields,s=e.id,i=e.edit,o=Object(g.c)((function(e){return e.role})),l=Object(g.c)((function(e){return e.userId})),x=Object(g.c)((function(e){return e.language})),y=Object(g.c)((function(e){return e.theme})),v=Object(a.useState)(!1),k=Object(d.a)(v,2),w=k[0],S=k[1],C=Object(a.useState)(!1),N=Object(d.a)(C,2),I=N[0],E=N[1],L=Object(a.useState)(!1),F=Object(d.a)(L,2),A=F[0],U=F[1],G=Object(a.useState)({name:t.name,description:t.description,file:null}),D=Object(d.a)(G,2),P=D[0],M=D[1],q=Object(a.useState)("Click or drop your file here"),z=Object(d.a)(q,2),R=z[0],H=z[1],J=Object(a.useState)("#888"),V=Object(d.a)(J,2),K=V[0],Z=V[1],W=f(),Q=W.request,X=W.error,Y=W.loading;function $(){return($=Object(u.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q("/api/collections/deleteCollection","POST",{token:localStorage.getItem("token"),id:t.id,ownerId:t.ownerId},{"Content-Type":"application/json"});case 2:(n=e.sent)&&n.ok&&(window.location="/collections/"+t.ownerId);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(u.a)(j.a.mark((function e(c,a){var r,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q("/api/files/fileUpload","POST",a);case 2:if(!(r=e.sent)||!r.ok){e.next=8;break}return e.next=6,Q("/api/collections/createItem","POST",Object(Oe.a)(Object(Oe.a)({},c),{},{img_id:r.img_id,img_format:r.img_format,parentName:t.name,token:localStorage.getItem("token"),id:s,ownerId:t.ownerId}),{"Content-Type":"application/json"});case 6:(i=e.sent)&&i.ok&&(n().then(),S(!1));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){M(Object(Oe.a)(Object(Oe.a)({},P),{},Object(me.a)({},e.target.name,e.target.value)))}function ne(){return(ne=Object(u.a)(j.a.mark((function e(c){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q("/api/collections/editCollectionFields","POST",{ownerId:t.ownerId,token:localStorage.getItem("token"),id:t.id,fields:c},{"Content-Type":"application/json"});case 2:(a=e.sent)&&a.ok&&(n().then(),E(!1));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){M({name:t.name,description:t.description,file:null})}),[t]),Object(c.jsxs)(b.a,{className:"mt-4 py-3 bg-"+("dark"===y?"semi-dark":"white")+" text-"+("dark"===y?"white-50":"dark"),children:[Object(c.jsxs)(O.a,{children:[Object(c.jsx)(h.a,{xl:4,lg:5,md:6,xs:12,className:"text-center px-lg-2 px-0 text-lg-left",children:A?Object(c.jsx)(xe.StyledDropZone,{onMouseEnter:function(){"#888"===K&&Z("#46b2ae")},onMouseLeave:function(){"#46b2ae"===K&&Z("#888")},children:R,style:{borderColor:K},onDrop:function(e){var t=e.name.length<12?e.name:e.name.substr(0,9)+"...";M(Object(Oe.a)(Object(Oe.a)({},P),{},{file:e})),H("\u0424\u0430\u0439\u043b \u0432\u044b\u0431\u0440\u0430\u043d ("+t+")"),Z("#74d239")}}):Object(c.jsx)(T.a,{className:"ml-lg-4",cloudName:"itransit",publicId:t.img_id,format:t.img_format,children:Object(c.jsx)(_.a,{crop:"fill",gravity:"faces",width:"300",height:"200"})})}),Object(c.jsxs)(h.a,{className:"text-center text-md-left px-lg-2 px-0 mr-3 mr-lg-0",children:[Object(c.jsxs)(O.a,{children:[Object(c.jsxs)(h.a,{lg:7,md:7,xs:12,children:[A?Object(c.jsx)(m.a.Control,{onChange:te,name:"name",type:"text",value:P.name}):Object(c.jsx)("h2",{className:"fs-6",children:t.name}),Object(c.jsxs)("p",{children:[Object(c.jsx)("strong",{children:_e[x].collections.owner}),": ",Object(c.jsx)("a",{href:"/collections/"+t.ownerId,children:t.ownerName})]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("strong",{children:_e[x].theme}),": ",t.theme]})]}),Object(c.jsx)(h.a,{style:{display:"flex",flexDirection:"column"},children:"Admin"===o||l===t.ownerId?A?[Object(c.jsx)(p.a,{variant:"outline-success mb-2 mb-lg-3",onClick:function(){var e={};P.name!==t.name&&(e.name=P.name),P.description!==t.description&&(e.description=P.description),P.file&&(e.file=P.file),i(e)},disabled:Y,children:_e[x].save},0),Object(c.jsx)(p.a,{variant:"outline-danger my-0 mt-lg-3",onClick:function(){return U(!1)},disabled:Y,children:_e[x].cancel},1)]:[Object(c.jsx)(p.a,{variant:"outline-success mb-2 mb-lg-3",onClick:function(){return S(!0)},children:_e[x].createNewItem},1),Object(c.jsx)(p.a,{variant:"outline-primary mb-2 mt-lg-3",onClick:function(){return U(!0)},children:_e[x].editCollection},2),Object(c.jsx)(p.a,{variant:"outline-primary mb-2 mt-lg-3",onClick:function(){return E(!0)},children:_e[x].changeItemFields},3),Object(c.jsx)(p.a,{variant:"outline-danger mb-2 mt-lg-3",onClick:function(){return $.apply(this,arguments)},children:_e[x].delete},4)]:[]})]}),Object(c.jsx)(O.a,{children:Object(c.jsx)(h.a,{children:A?Object(c.jsx)(m.a.Control,{onChange:te,as:"textarea",rows:5,name:"description",value:P.description}):[Object(c.jsxs)("strong",{children:[_e[x].descriptionB,": "]},1),Object(c.jsx)(B.a,{children:t.description||"description is absent"},2)]})})]})]}),Object(c.jsx)(Ne,{create:function(e,t){return ee.apply(this,arguments)},fields:r,show:w,hide:function(){return S(!1)},error:X,loading:Y}),Object(c.jsx)(Ee,{hide:function(){return E(!1)},show:I,fields:r,error:X,loading:Y,edit:function(e){return ne.apply(this,arguments)}})]})};var Fe=function(){var e=Object(a.useState)({}),t=Object(d.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(null),i=Object(d.a)(s,2),l=i[0],m=i[1],p=Object(a.useState)([]),x=Object(d.a)(p,2),g=x[0],y=x[1],v=Object(o.g)().id,k=f(),w=k.loading,S=k.error,C=k.request;function N(){return I.apply(this,arguments)}function I(){return(I=Object(u.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("/api/collections/getCollection","POST",{id:v},{"Content-Type":"application/json"});case 2:if(!(t=e.sent)||!t.ok){e.next=10;break}return r({name:t.collection.name,id:t.collection._id,description:t.collection.description,theme:t.collection.theme,ownerId:t.collection.ownerId,ownerName:t.collection.ownerName,img_id:t.collection.img_id,img_format:t.collection.img_format}),y(t.collection.advancedFields),e.next=8,C("/api/collections/getItems","POST",{id:t.collection._id},{"Content-Type":"application/json"});case 8:(n=e.sent)&&n.ok&&m(n.items);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(u.a)(j.a.mark((function e(t){var c,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.file){e.next=7;break}return(c=new FormData).append("file",t.file),e.next=5,C("/api/files/fileUpload","POST",c);case 5:(a=e.sent)&&a.ok&&(t.img_id=a.img_id,t.img_format=a.img_format);case 7:return e.next=9,C("/api/collections/editCollection","POST",{edit:t,token:localStorage.getItem("token"),id:v,ownerId:n.ownerId},{"Content-Type":"application/json"});case 9:(r=e.sent)&&r.ok&&N().then();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){N().then()}),[]),Object(c.jsxs)(b.a,{fluid:!0,children:[w?Object(c.jsx)(O.a,{className:"justify-content-md-center",children:Object(c.jsx)(M.a,{type:"spin",color:"#000000",height:60,width:60})}):Object(c.jsxs)(h.a,{children:[Object(c.jsx)(Le,{info:n,loadCollection:N,id:v,fields:g,edit:function(e){return T.apply(this,arguments)}}),Object(c.jsx)(D,{items:l,size:2})]}),Object(c.jsx)("span",{children:S||""})]})},Ae=n(410),Ue=n(411),Ge=n(19);var De=function(e){var t=e.info,n=e.loading2,r=e.edit,s=Object(g.c)((function(e){return e.role})),i=Object(g.c)((function(e){return e.userId})),o=Object(g.c)((function(e){return e.language})),l=Object(g.c)((function(e){return e.theme})),x=Object(a.useState)(!1),y=Object(d.a)(x,2),v=y[0],k=y[1],w=Object(a.useState)(0),S=Object(d.a)(w,2),C=S[0],N=S[1],I=Object(a.useState)(!1),E=Object(d.a)(I,2),L=E[0],F=E[1],A=Object(a.useState)("Click or drop your file here"),U=Object(d.a)(A,2),G=U[0],D=U[1],P=Object(a.useState)({name:t.name,file:null}),M=Object(d.a)(P,2),q=M[0],z=M[1],B=Object(a.useState)("#888"),R=Object(d.a)(B,2),H=R[0],J=R[1],V=f(),K=V.request,Z=V.loading;function W(){return Q.apply(this,arguments)}function Q(){return(Q=Object(u.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z){e.next=2;break}return e.abrupt("return");case 2:return k(!v),e.next=5,K("/api/items/likeItem","POST",{token:localStorage.getItem("token"),id:t._id},{"Content-Type":"application/json"});case 5:(n=e.sent)&&n.ok&&(k(n.like),N(C+(n.like?1:-1)));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(u.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K("/api/items/deleteItem","POST",{token:localStorage.getItem("token"),id:t._id,ownerId:t.ownerId,parent:t.parent},{"Content-Type":"application/json"});case 2:(n=e.sent)&&n.ok&&(window.location="/collection/"+t.parent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){z({name:t.name,file:null}),t.likes&&(k(t.likes.includes(i)),N(t.likes.length))}),[t,i]),Object(c.jsx)(b.a,{className:"mt-4 py-3 bg-"+("dark"===l?"semi-dark":"white")+" text-"+("dark"===l?"white-50":"dark"),children:Object(c.jsxs)(O.a,{children:[Object(c.jsx)(h.a,{xl:4,lg:5,md:6,xs:12,className:"text-center px-lg-2 px-0 text-lg-left",children:L?Object(c.jsx)(xe.StyledDropZone,{onMouseEnter:function(){"#888"===H&&J("#46b2ae")},onMouseLeave:function(){"#46b2ae"===H&&J("#888")},children:G,style:{borderColor:H},onDrop:function(e){var t=e.name.length<12?e.name:e.name.substr(0,9)+"...";z(Object(Oe.a)(Object(Oe.a)({},q),{},{file:e})),D("\u0424\u0430\u0439\u043b \u0432\u044b\u0431\u0440\u0430\u043d ("+t+")"),J("#74d239")}}):Object(c.jsx)(T.a,{className:"ml-lg-4",cloudName:"itransit",publicId:t.img_id,format:t.img_format,children:Object(c.jsx)(_.a,{crop:"fill",gravity:"faces",width:"300",height:"200"})})}),Object(c.jsx)(h.a,{className:"text-center text-md-left px-lg-2 px-0 mr-3 mr-lg-0",children:Object(c.jsxs)(O.a,{children:[Object(c.jsxs)(h.a,{lg:7,md:7,xs:12,children:[L?Object(c.jsx)(m.a.Control,{onChange:function(e){z(Object(Oe.a)(Object(Oe.a)({},q),{},Object(me.a)({},e.target.name,e.target.value)))},name:"name",type:"text",value:q.name}):Object(c.jsx)("h2",{className:"fs-6",children:t.name}),Object(c.jsxs)("p",{children:[Object(c.jsx)("strong",{children:Ge[o].collections.collection}),": ",Object(c.jsx)("a",{href:"/collection/"+t.parent,children:t.parentName})]}),Object(c.jsxs)(h.a,{children:[Object(c.jsx)(O.a,{className:"justify-content-center",children:v?Object(c.jsx)(Ae.a,{style:{fontSize:"30px",color:"#c41e1e",cursor:"pointer"},onClick:W}):Object(c.jsx)(Ue.a,{style:{fontSize:"30px",color:"#c41e1e",cursor:"pointer"},onClick:W})}),Object(c.jsx)(O.a,{className:"justify-content-center",children:Object(c.jsx)("span",{children:C})})]})]}),Object(c.jsx)(h.a,{style:{display:"flex",flexDirection:"column"},children:"Admin"===s||i===t.ownerId?L?[Object(c.jsx)(p.a,{variant:"outline-success mb-2 mb-lg-3",disabled:n,onClick:function(){var e={file:q.file};q.name!==t.name&&(e.name=q.name),r(e)},children:Ge[o].save},0),Object(c.jsx)(p.a,{variant:"outline-danger my-0 mt-lg-3",onClick:function(){return F(!1)},disabled:n,children:Ge[o].cancel},1)]:[Object(c.jsx)(p.a,{variant:"outline-primary mb-2 mt-lg-3",onClick:function(){return F(!0)},children:Ge[o].editItem},2),Object(c.jsx)(p.a,{variant:"outline-danger mb-2 mt-lg-3",onClick:function(){return X.apply(this,arguments)},children:Ge[o].delete},3)]:[]})]})})]})})},Pe=n(19);var Me=function(e){var t=e.item,n=e.loadItem,r=Object(g.c)((function(e){return e.role})),s=Object(g.c)((function(e){return e.userId})),i=Object(g.c)((function(e){return e.language})),o=Object(g.c)((function(e){return e.theme})),l=Object(a.useState)(t.fields),x=Object(d.a)(l,2),y=x[0],v=x[1],k=Object(a.useState)(!1),w=Object(d.a)(k,2),S=w[0],C=w[1],N=f().request;function I(e,t){var n=Object(he.a)(y);n[t].value="checkbox"!==e.target.type?e.target.value:e.target.checked,v(n)}function T(){return(T=Object(u.a)(j.a.mark((function e(){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("/api/items/editItemFields","POST",{token:localStorage.getItem("token"),ownerId:t.ownerId,id:t._id,edit:y},{"Content-Type":"application/json"});case 2:(c=e.sent)&&c.ok&&n().then();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){v(t.fields)}),[t]),Object(c.jsx)(b.a,{className:"mt-4 px-5 py-3 bg-"+("dark"===o?"semi-dark":"white")+" text-"+("dark"===o?"white-50":"dark"),children:Object(c.jsxs)(O.a,{children:[Object(c.jsxs)(h.a,{xs:10,children:[Object(c.jsx)(O.a,{className:"mb-3",children:Object(c.jsxs)("h1",{children:[Pe[i].itemInfo,": "]})}),y?y.map((function(e,t){return S?"text"===e.type?Object(c.jsxs)(O.a,{children:[Object(c.jsxs)("span",{style:{fontSize:"28px"},className:"mb-0",children:[Object(c.jsx)("strong",{children:e.name}),": "]}),Object(c.jsx)(m.a.Control,{as:"textarea",onChange:function(e){return I(e,t)},value:e.value},t)]},t):Object(c.jsxs)(O.a,{className:"mb-1",children:[Object(c.jsxs)("span",{style:{fontSize:"28px"},className:"mb-0",children:[Object(c.jsx)("strong",{children:e.name}),": "]}),Object(c.jsx)(m.a.Control,{type:e.type,onChange:function(e){return I(e,t)},value:e.value,checked:e.value})]},t):Object(c.jsx)(O.a,{className:"mb-3",children:Object(c.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-end"},children:[Object(c.jsxs)("span",{style:{fontSize:"26px"},className:"mb-0",children:[Object(c.jsx)("strong",{children:e.name}),": "]}),Object(c.jsx)("span",{style:{fontSize:"26px"},className:"ml-2 mb-0",children:"checkbox"!==e.type?e.value?e.value:"empty":e.value?Object(c.jsx)(A.a,{style:{color:"#42b32c",fontSize:"32px"}}):Object(c.jsx)(F.a,{style:{color:"#e22b2b",fontSize:"32px"}})})]})},t)})):[]]}),Object(c.jsx)(h.a,{children:"Admin"===r||s===t.ownerId?S?[Object(c.jsx)(p.a,{variant:"outline-success",onClick:function(){return T.apply(this,arguments)},children:Pe[i].save},0),Object(c.jsx)(p.a,{variant:"outline-danger",onClick:function(){return C(!1)},children:Pe[i].cancel},1)]:Object(c.jsx)(p.a,{variant:"outline-primary",onClick:function(){return C(!0)},style:{position:"absolute",top:"5px",right:"0"},children:Pe[i].edit}):[]})]})})};var qe=function(e){var t=e.username,n=e.message,a=e.userId;return Object(c.jsxs)(h.a,{style:{background:"#ffffff",boxShadow:"0 0 5px rgba(0,0,0,0.3)"},className:"px-5 py-2 my-3",children:[Object(c.jsx)(O.a,{children:Object(c.jsx)("a",{href:"/collections/"+a,children:t})}),Object(c.jsx)(O.a,{style:{color:"#676565"},children:n})]})},ze=n(19);var Be=function(e){var t=e.itemID,n=Object(g.c)((function(e){return e.language})),r=Object(g.c)((function(e){return e.isAuthUser})),s=Object(g.c)((function(e){return e.theme})),i=Object(a.useState)([]),o=Object(d.a)(i,2),l=o[0],x=o[1],y=Object(a.useState)(""),v=Object(d.a)(y,2),k=v[0],w=v[1],S=f().request;function C(e){return N.apply(this,arguments)}function N(){return(N=Object(u.a)(j.a.mark((function e(n){var c,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("/api/items/getItem","POST",{id:t},{"Content-Type":"application/json"});case 2:if((c=e.sent)&&c.ok){if(n){for(a=setTimeout((function(){}),1),r=0;r<=a;r++)clearInterval(r);setInterval(C,3e3)}x(c.item.comments)}case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(u.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("/api/items/createComment","POST",{token:localStorage.getItem("token"),itemId:t,message:k},{"Content-Type":"application/json"});case 2:(n=e.sent)&&n.ok&&(w(""),C().then());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){t&&C(!0).then()}),[t]),Object(c.jsxs)(b.a,{className:"mt-4 px-3 py-3 bg-"+("dark"===s?"semi-dark":"white")+" text-"+("dark"===s?"white-50":"dark"),children:[Object(c.jsx)(O.a,{className:"w-100 justify-content-center",children:Object(c.jsxs)("h1",{children:[ze[n].comments,": "]})}),l.length<=0?Object(c.jsx)(O.a,{className:"w-100 justify-content-center mt-3",children:Object(c.jsx)("span",{style:{color:"#777171"},children:ze[n].commentsMessage})}):l.map((function(e,t){return Object(c.jsx)(qe,{username:e.username,userId:e.userId,message:e.message},t)})),r?Object(c.jsx)(b.a,{children:Object(c.jsxs)(O.a,{className:"mt-5 justify-content-center",children:[Object(c.jsx)(h.a,{md:7,xs:9,children:Object(c.jsx)(m.a.Control,{as:"textarea",rows:3,value:k,onChange:function(e){return w(e.target.value)}})}),Object(c.jsx)(h.a,{xs:1,className:"justify-content-center mt-3",children:Object(c.jsx)(p.a,{variant:"primary",className:"my-auto",onClick:function(){return I.apply(this,arguments)},children:ze[n].send})})]})}):[]]})};var Re=function(){var e=Object(o.g)().id,t=f(),n=t.loading,r=t.request,s=t.error,i=Object(a.useState)({}),l=Object(d.a)(i,2),h=l[0],m=l[1];function p(){return x.apply(this,arguments)}function x(){return(x=Object(u.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r("/api/items/getItem","POST",{id:e},{"Content-Type":"application/json"});case 2:(n=t.sent)&&n.ok&&m(n.item);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(){return(g=Object(u.a)(j.a.mark((function e(t){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.file){e.next=14;break}return(n=new FormData).append("file",t.file),e.next=5,r("/api/files/fileUpload","POST",n);case 5:if(!(c=e.sent)||!c.ok){e.next=12;break}return t.img_id=c.img_id,t.img_format=c.img_format,e.next=11,r("/api/items/editItem","POST",{ownerId:h.ownerId,id:h._id,token:localStorage.getItem("token"),edit:t},{"Content-Type":"application/json"});case 11:p().then();case 12:e.next=17;break;case 14:return e.next=16,r("/api/items/editItem","POST",{ownerId:h.ownerId,id:h._id,token:localStorage.getItem("token"),edit:t},{"Content-Type":"application/json"});case 16:p().then();case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){p().then()}),[]),n?Object(c.jsx)(O.a,{className:"justify-content-md-center",children:Object(c.jsx)(M.a,{type:"spin",color:"#000000",height:60,width:60})}):Object(c.jsxs)(b.a,{children:[Object(c.jsx)(De,{loading:n,edit:function(e){return g.apply(this,arguments)},error:s,info:h}),Object(c.jsx)(Me,{item:h,loadItem:p}),Object(c.jsx)(Be,{itemID:h._id})]})},He=n(128),Je=n(176),Ve=n.n(Je),Ke=n(19);function Ze(e){return Object(c.jsx)("div",{className:"suggestion",children:e.name})}var We=function(){var e=Object(o.g)().text,t=Object(g.c)((function(e){return e.language})),n=Object(a.useState)(e||""),r=Object(d.a)(n,2),s=r[0],i=r[1],l=Object(a.useState)(""),x=Object(d.a)(l,2),y=x[0],v=x[1],k=Object(a.useState)([]),w=Object(d.a)(k,2),S=w[0],C=w[1],N=Object(a.useState)([]),I=Object(d.a)(N,2),T=I[0],E=I[1],_=Object(a.useState)([]),L=Object(d.a)(_,2),F=L[0],A=L[1],U=Object(a.useState)([]),G=Object(d.a)(U,2),P=G[0],q=G[1],z=f(),B=z.request,R=z.loading;function H(){return(H=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("/api/items/getTags");case 2:(t=e.sent)&&t.ok&&E(t.tags);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return V.apply(this,arguments)}function V(){return(V=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("/api/items/findItems","POST",{text:s,tags:S},{"Content-Type":"application/json"});case 2:(t=e.sent)&&t.ok&&(console.log(t),q(t.items));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){s&&J().then(),function(){return H.apply(this,arguments)}().then()}),[]),Object(c.jsxs)(b.a,{fluid:!0,children:[Object(c.jsx)(b.a,{children:Object(c.jsx)(m.a,{inline:!0,children:Object(c.jsxs)(O.a,{className:"w-100 p-3 mt-3",style:{boxShadow:"0 0 10px 0 rgba(0, 0, 0, 0.2)"},children:[Object(c.jsx)(h.a,{xs:8,sm:9,md:10,xl:11,children:Object(c.jsx)(m.a.Control,{type:"text",value:s,placeholder:Ke[t].header.search,className:"w-100",onChange:function(e){return i(e.target.value)}})}),Object(c.jsx)(h.a,{xs:4,sm:3,md:2,lg:1,children:Object(c.jsx)(p.a,{variant:"outline-info",onClick:J,children:Ke[t].header.search})}),Object(c.jsx)(h.a,{xs:8,className:"mt-3",children:Object(c.jsx)(Se.a,{renderInput:function(e){var t=e.addTag,n=Object(He.a)(e,["addTag"]);return function(e){var t=e.addTag,n=e.suggestions,a=Object(He.a)(e,["addTag","suggestions"]);return Object(c.jsx)(Ve.a,{suggestions:n,shouldRenderSuggestions:function(e){return e&&e.trim().length>0},getSuggestionValue:function(e){return e.name},renderSuggestion:Ze,onSuggestionSelected:function(e,n){var c=n.suggestion;t(c.name)},inputProps:Object(Oe.a)(Object(Oe.a)({},a),{},{onChange:a.onChange}),onSuggestionsClearRequested:function(){},onSuggestionsFetchRequested:function(){}})}(Object(Oe.a)({addTag:t,suggestions:F},n))},value:S,inputProps:{style:{width:"100%"}},onChange:function(e){return C(e)},onChangeInput:function(e){v(e),e&&A(T.filter((function(t){for(var n=!1,c=0;c<=t.name.length-e.length;c++)t.name.substr(c,e.length)===e&&(n=!0);return n})))},inputValue:y})})]})})}),R?Object(c.jsx)(O.a,{className:"justify-content-md-center",children:Object(c.jsx)(M.a,{type:"spin",color:"#000000",height:60,width:60})}):Object(c.jsx)(D,{items:P,size:2})]})};var Qe=function(){var e=localStorage.getItem("token"),t=Object(g.c)((function(e){return e.theme})),n=Object(g.b)();Object(a.useEffect)((function(){e?w(e,n).then():(n({type:"SET_THEME",payload:localStorage.getItem("theme")||"light"}),n({type:"SET_LANGUAGE",payload:localStorage.getItem("language")||"rus"})),document.body.setAttribute("class","bg-"+t)}),[e,n,t]);var r=Object(g.c)((function(e){return e.isAuthUser})),s=Object(g.c)((function(e){return e.role}));return r?Object(c.jsxs)(i.a,{children:[Object(c.jsx)(be,{isLogged:r}),Object(c.jsxs)(o.d,{children:[Object(c.jsx)(o.b,{path:"/",exact:!0,children:Object(c.jsx)(Z,{})}),Object(c.jsx)(o.b,{path:"/collections/:ownerId",children:Object(c.jsx)(ke,{})}),Object(c.jsx)(o.b,{path:"/collection/:id",children:Object(c.jsx)(Fe,{})}),Object(c.jsx)(o.b,{path:"/search/:text?",children:Object(c.jsx)(We,{})}),Object(c.jsx)(o.b,{path:"/item/:id",children:Object(c.jsx)(Re,{})}),"Admin"===s?Object(c.jsx)(o.b,{path:"/admin",children:Object(c.jsx)(ae,{})}):[],Object(c.jsx)(o.a,{to:"/"})]})]}):Object(c.jsxs)(i.a,{children:[Object(c.jsx)(be,{isLogged:r}),Object(c.jsxs)(o.d,{children:[Object(c.jsx)(o.b,{path:"/signUp",children:Object(c.jsx)(v,{})}),Object(c.jsx)(o.b,{path:"/item/:id",children:Object(c.jsx)(Re,{})}),Object(c.jsx)(o.b,{path:"/collections/:ownerId",children:Object(c.jsx)(ke,{})}),Object(c.jsx)(o.b,{path:"/search/:text?",children:Object(c.jsx)(We,{})}),Object(c.jsx)(o.b,{path:"/collection/:id",children:Object(c.jsx)(Fe,{})}),Object(c.jsx)(o.b,{path:"/signIn",children:Object(c.jsx)(N,{})}),Object(c.jsx)(o.b,{path:"/",children:Object(c.jsx)(Z,{})}),Object(c.jsx)(o.a,{to:"/signUp"})]})]})},Xe=n(89),Ye={isAuthUser:!1,userId:null,role:null,theme:"light",language:"rus",selected:[]};var $e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_USER":return e.isAuthUser=!0,e.userId=t.payload.id,e.role=t.payload.role,e;case"LOGOUT_USER":return e.isAuthUser=!1,e.user=null,e;case"SELECT_USER":return e.selected=[].concat(Object(he.a)(e.selected),[t.payload]),e;case"UNSELECT_USER":return e.selected=e.selected.filter((function(e){return e!==t.payload})),e;case"SELECT_ALL":return e.selected=t.payload,e;case"UNSELECT_ALL":return e.selected=[],e;case"SET_THEME":return e.theme=t.payload,e;case"SET_LANGUAGE":return e.language=t.payload,e;default:return e}},et=Object(Xe.b)($e);s.a.render(Object(c.jsx)(g.a,{store:et,children:Object(c.jsx)(Qe,{})}),document.getElementById("root"))}},[[395,1,2]]]);
//# sourceMappingURL=main.e25c26b5.chunk.js.map